(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,a){e.exports=a(43)},23:function(e,t,a){},27:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),o=a.n(s),c=(a(23),a(5)),l=a.n(c),i=a(13),m=a(6),u=a(7),d=a(11),p=a(8),h=a(12),v=a(47),f=a(44),g=a(46),b=a(45),E=(a(27),function(){return r.a.createElement("div",{className:"subLinks"},["PSVR","PS4","Apple","iPhone","NoMansSkyTheGame","Minecraft","PS4Deals"].map(function(e,t){var a="/"+e;return r.a.createElement(b.a,{className:"navLink",activeClassName:"active",key:t,to:a},e)}))}),k=(a(33),function(){return r.a.createElement("div",{className:"loadingSpinner"})}),y=a(32),N=(a(35),function(e){var t=e.sub,a=e.post,n=r.a.createElement("div",{className:"postThumbnail"},r.a.createElement("img",{src:a.thumbnail,alt:"Thumbnail for post"}));!1===/(.jpg|.png|.bmp|.jpeg)/.test(a.thumbnail)&&(n=r.a.createElement("span",null));var s=r.a.createElement("div",{className:"postLinkBody",dangerouslySetInnerHTML:{__html:a.body}}),o=!1;a.url.match(/.jpg$/)&&(s=r.a.createElement("div",{className:"postLinkBody"},r.a.createElement("img",{src:a.url,alt:"Preview user linked to"})),o=!0),a.media.length>0&&(a.body.length>0&&(a.media+="<br/>"+a.body),s=r.a.createElement("div",{className:"postLinkBody",dangerouslySetInnerHTML:{__html:a.media}}),o=!0);var c=r.a.createElement("span",null," - ",r.a.createElement("span",{className:"postLinkOpen",onClick:function(e){e.preventDefault();var t=e.target.parentNode.parentNode.parentNode.querySelector(".postLinkBody");t.classList.toggle("open"),t.classList.contains("open")?e.target.innerText="[ - ] ":e.target.innerText="[ + ] "}},"[ + ] "));0===a.body.length&&!1===o&&(c=r.a.createElement("span",null));var l="postLink";return a.stickied&&(l+=" stickied"),r.a.createElement("div",{className:l},n,r.a.createElement("div",{className:"postLinkContent"},r.a.createElement(y.a,{to:"".concat(t,"/").concat(a.id),className:"postLinkTitle"},a.title),r.a.createElement("div",{className:"postLinkMiddle"},r.a.createElement("a",{className:"postLinkDomain",href:a.url,target:"_blank",rel:"noopener noreferrer"},a.domain," - "),r.a.createElement("span",{className:"postLinkAuthor"},a.author),c),s,r.a.createElement("div",{className:"postLinkFooter"},r.a.createElement(y.a,{to:"".concat(t,"/").concat(a.id),className:"postLinkComments"},a.num_comments," Comments "),"- ",r.a.createElement("a",{className:"postLinkReddit",href:"https://www.reddit.com"+a.permalink,target:"_blank",rel:"noopener noreferrer"},"Open on Reddit"))))}),w=(a(37),function(e){var t=e.posts,a=e.sub;return t&&0===t.length?r.a.createElement(k,null):t?r.a.createElement("div",{className:"postListDiv"},t.map(function(e){return r.a.createElement(N,{key:e.id,post:e,sub:a})})):r.a.createElement("div",{className:"postListDiv"},"No Posts Found")}),L=(a(39),function(e){function t(){return Object(m.a)(this,t),Object(d.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.comment,a=e.author,n="";return t.replies.length>0&&(n=r.a.createElement(x,{comments:t.replies,author:a})),r.a.createElement("div",{className:"commentDiv"},r.a.createElement("div",{className:"commentHeader"},r.a.createElement("span",{className:"commentClose",onClick:function(e){e.preventDefault();var t=e.target.parentNode.parentNode;t.classList.toggle("closed"),t.classList.contains("closed")?e.target.innerText="[ + ] ":e.target.innerText="[ - ] "}},"[ - ] "),r.a.createElement("span",{className:t.author===a?"commentAuthor OP":"commentAuthor"},t.author),r.a.createElement("span",{className:"commentScore"}," | ",t.score)),r.a.createElement("div",{className:"commentText",dangerouslySetInnerHTML:{__html:t.body_html}}),r.a.createElement("div",{className:"commentFooter"},r.a.createElement("a",{className:"commentPermalink",target:"_blank",rel:"noopener noreferrer",href:"http://www.reddit.com"+t.permalink},"Permalink")),n)}}]),t}(n.Component)),x=function(e){var t=e.comments,a=e.author;return t&&t.length>0?r.a.createElement("div",{className:"comments"},t.map(function(e){return e.author?r.a.createElement(L,{key:e.id,comment:e,author:a}):null})):t?r.a.createElement("div",null):t?void 0:r.a.createElement(k,null)},j=(a(41),function(e){var t=e.postDetails,a=t.title,n=t.body,s=t.comments,o=t.url,c=t.media,l=t.author,i=r.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}});/.(png|jpg|jpeg|bmp)$/.test(o)&&(i=r.a.createElement("img",{src:o,alt:"Preview of content"}));var m=o||"";return m.length>40&&(m=m.substr(0,40)+"..."),c&&c.length>0&&(n.length>0&&(c+="<br/>"+n),i=r.a.createElement("div",{dangerouslySetInnerHTML:{__html:c}})),r.a.createElement("div",null,0===a.length?r.a.createElement("h1",{className:"loading"},"Loading..."):r.a.createElement("div",{className:"postDiv"},r.a.createElement("h1",null,a),r.a.createElement("div",{className:"postMiddle"},r.a.createElement("span",null,l),r.a.createElement("a",{className:"postGoToURL",href:o,target:"_blank",rel:"noopener noreferrer"}," | Go to URL (",m,")")),i,r.a.createElement("hr",null),r.a.createElement(x,{comments:s,author:l})))}),S=function(e){var t=e.heading,a=e.onReload;return r.a.createElement("h1",{className:"subHeader"},t," ",r.a.createElement("span",{className:"reloadButton",onClick:a},"\u21bb"))},T=function(e){var t=e.onClick,a=e.currentSort;return r.a.createElement("div",{className:"sortButtons"},["Hot","New","Rising","Controversial","Top"].map(function(e,n){var s="sortButton";return e.toLowerCase()===a&&(s+=" active"),r.a.createElement("span",{key:n,className:s,onClick:t},e.toLowerCase())}))},C=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(d.a)(this,Object(p.a)(t).call(this))).onReload=function(){e.checkUrlAndUpdate(!0)},e.onChangeSortMethod=function(t){var a=t.target.innerText.toLowerCase();e.setState({sortMethod:a})},e.getPostList=function(){var t=Object(i.a)(l.a.mark(function t(a){var n,r,s,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.length>0&&(a="r/"+a),t.prev=1,n="https://www.reddit.com/"+a+"/"+e.state.sortMethod+"/.json",0===a.length&&(n="https://www.reddit.com/.json"),t.next=6,fetch(n);case 6:return r=t.sent,t.next=9,r.json();case 9:(s=t.sent).error?e.setState({posts:null}):s&&s.data&&s.data.children&&(0===(o=s.data.children.map(function(t){var a=t.data,n=a.media;return n=n&&n.oembed?e.parseBodyText(n.oembed.html):"",{author:a.author,domain:a.domain,title:e.parseBodyText(a.title),id:a.id,body:e.parseBodyText(a.selftext_html),num_comments:a.num_comments,score:a.score,subreddit:a.subreddit,stickied:a.stickied,url:a.url,thumbnail:a.thumbnail,permalink:a.permalink,media:n}})).length&&(o=null),e.setState({posts:o})),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0),e.setState({posts:null});case 17:case"end":return t.stop()}},t,this,[[1,13]])}));return function(e){return t.apply(this,arguments)}}(),e.getPostDetails=function(){var t=Object(i.a)(l.a.mark(function t(a){var n,r,s,o,c,i,m,u,d,p;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://www.reddit.com/r/"+a+".json");case 3:return n=t.sent,t.next=6,n.json();case 6:(r=t.sent).error?e.setState({postDetails:{title:"Not Found",body:"",id:""}}):(s=r[0].data.children[0].data,o=s.title,c=s.selftext_html,i=s.id,m=s.url,u=s.media,d=s.author,p=r[1].data.children.map(function(t){return e.parseComment(t.data)}),u=u&&u.oembed?e.parseBodyText(u.oembed.html):"",c=e.parseBodyText(c),e.setState({postDetails:{title:o,body:c,id:i,url:m,media:u,comments:p,author:d}})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(e){return t.apply(this,arguments)}}(),e.state={sub:"",postId:"",sortMethod:"hot",posts:[],postDetails:{title:"",body:"",id:"",comments:[]}},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E,null),r.a.createElement(S,{heading:this.state.sub,onReload:this.onReload}),r.a.createElement(T,{onClick:this.onChangeSortMethod,currentSort:this.state.sortMethod}),r.a.createElement("hr",null),r.a.createElement(v.a,null,r.a.createElement(f.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(w,Object.assign({},t,{posts:e.state.posts,sub:e.state.sub}))}}),r.a.createElement(f.a,{exact:!0,path:"/:sub",render:function(t){return r.a.createElement(w,Object.assign({},t,{posts:e.state.posts,sub:e.state.sub}))}}),r.a.createElement(f.a,{exact:!0,path:"/:sub/:post",render:function(t){return r.a.createElement(j,Object.assign({},t,{postDetails:e.state.postDetails}))}})))}},{key:"parseBodyText",value:function(e){return e=e?e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;#39;/g,"'").replace(/&amp;quot;/g,'"').replace(/&amp;/g,"&").replace(/&#x200B;/g," "):""}},{key:"parseComment",value:function(e){var t=this,a=e.body_html,n=e.id,r=e.author,s=e.permalink,o=e.replies,c=e.score;return{body_html:a=this.parseBodyText(a),id:n,author:r,permalink:s,replies:o=(o="object"===typeof o?o.data.children:[]).map(function(e){return t.parseComment(e.data)}),score:c}}},{key:"checkUrlAndUpdate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.location.pathname.replace("/",""),a=this.props.location.pathname.match(/\//g);if(1===(a=a?a.length:0))(t!==this.state.sub||e)&&(this.setState({sub:t,posts:[]}),this.getPostList(t));else if(2===a){var n=t.replace(/\/[a-zA-Z0-9]+/,""),r=t.replace(/[a-zA-Z0-9]+\//,"");if((n!==this.state.sub||e)&&(this.setState({sub:n,posts:[]}),this.getPostList(n)),r!==this.state.postId||e){var s=this.state.posts.find(function(e){return e.id===r});s?this.setState({sub:n,postId:r,postDetails:s}):this.setState({sub:n,postId:r,postDetails:{title:"",body:"",id:""}}),this.getPostDetails("".concat(n,"/").concat(r))}}}},{key:"componentDidUpdate",value:function(e,t){var a=!1;t.sortMethod!==this.state.sortMethod&&(a=!0),this.checkUrlAndUpdate(a)}},{key:"componentDidMount",value:function(){this.checkUrlAndUpdate(!0)}}]),t}(n.Component),_=function(){return r.a.createElement(g.a,null,r.a.createElement(f.a,{path:"/",component:C}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,2,1]]]);
//# sourceMappingURL=main.da857a13.chunk.js.map