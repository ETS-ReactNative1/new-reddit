{"version":3,"sources":["components/Styled/ButtonGroup.js","components/Styled/ButtonList.js","components/Styled/Input.js","components/Styled/Button.js","components/Styled/SideButton.js","components/SubList.js","components/SortMenu.js","components/UserSortMenu.js","components/CommentSortMenu.js","components/Checkbox.js","components/SearchMenu.js","components/SaveList.js","components/TopMenu.js","redux/reducers.js","redux/store.js","functions/useful.js","components/Styled/PostTitle.js","components/Styled/PostTextGroup.js","components/Styled/PostDetails.js","components/Styled/PostExpand.js","components/PostLink.js","components/SubLink.js","components/CommentList.js","components/Comment.js","components/Styled/LoadingSpinner.js","components/PostList.js","components/Gallery.js","components/Post.js","components/Header.js","components/SideMenu.js","MainPage.js","App.js","serviceWorker.js","index.js"],"names":["ButtonGroup","styled","div","ButtonList","Input","input","Button","button","props","selected","disabled","SideButton","Icon","CustomSub","sub","currentSub","currentSort","onDeleteSub","editMode","key","id","className","style","position","top","to","textTransform","onClick","checkIfSubbed","subs","length","includes","SubList","dispatch","useDispatch","useSelector","state","setSubs","val","type","payload","useState","setEditMode","newSub","setNewSub","useEffect","storedSubs","localStorage","getItem","JSON","parse","newSubArr","filter","subName","setItem","stringify","addSubToStorage","arr","displaySubs","map","list","setList","data","handle","placeholder","onChange","e","target","value","SortMenu","option","UserSortMenu","currentUserSort","display","exact","CommentSortMenu","commentSort","changeCommentSort","StyledCheckbox","Checkbox","checked","SearchMenu","history","useHistory","closeMenus","currentSearch","search","setSearch","currentSearchSort","searchSort","setSearchSort","currentSearchSub","searchSub","setSearchSub","onSearch","push","onKeyPress","width","saved","currentPostId","obj","url","fontSize","title","StyledTopMenu","MenuButton","Dropdown","right","TopMenu","onBackClick","searchMenuOpen","subMenuOpen","sortMenuOpen","saveMenuOpen","Fragment","SaveList","initialState","currentUser","postDetails","posts","noPosts","noMorePosts","latestPost","comments","extraComments","noComments","searchForSubs","previousUrl","permalinkUrl","showContext","store","createStore","action","parseComment","parent","kind","permalink","match","parent_id","replace","body_html","name","author","replies","score","comment","created_utc","parseBodyText","children","hasContext","parseLinks","text","redditMatches","forEach","parseBool","str","getMySubs","prepend","join","getPostList","a","loadMore","force","getState","setLatestPost","setPosts","setNoPosts","setNoMorePosts","setPreviousUrl","parsedStr","split","baseUrl","fetch","response","json","error","console","log","batch","newPosts","post","media","oembed","html","display_name","description","description_html","created","subscribers","link_title","link_id","subreddit","domain","body","selftext_html","num_comments","stickied","thumbnail","media_embed","noMore","getMoreComments","fullUrl","setExtraComments","newComments","parentComment","undefined","find","newExtras","getComments","setComments","setNoComments","setPostDetails","context","media_metadata","is_gallery","gallery_data","PostTitle","PostTextGroup","PostDetails","PostExpand","StyledPostLink","PostThumbnail","PostComments","PostBody","React","memo","onClickLink","expanded","setExpanded","dateString","formatDistanceStrict","Date","showThumbnail","test","bodyContent","dangerouslySetInnerHTML","__html","bodyHasImage","src","alt","href","rel","openBtn","maxWidth","marginLeft","prevProps","nextProps","AddSubBtn","alreadySubbed","reduce","c","toLowerCase","StyledCommentList","CommentList","StyledComment","single","CommentClose","span","CommentAuthor","original","CommentFooter","CommentLinkTitle","Comment","closed","setClosed","permalinkComment","extras","pointString","color","backgroundColor","LoadingSpinner","PostList","textAlign","hide","hasMore","margin","marginBottom","dataLength","next","loader","scrollableTarget","scrollThreshold","StyledComp","getURL","index","limit","u","Gallery","extraData","firstId","Object","keys","setId","isMobile","useMediaQuery","level4","level5","indexOf","numberOfImages","showSpinner","setShowSpinner","p","s","caption","extraDataObj","items","media_id","onClickThumb","nextId","left","zIndex","onLoad","values","i","StyledPost","ScrollButton","SimpleButton","parsePostBody","bodyTag","content","Post","updatePostDetails","window","scrollTo","urlMatches","localUrl","shortUrl","substr","isSaved","urlTag","newSaved","link","commentDiv","document","querySelector","child","rect","getBoundingClientRect","scrollIntoView","scrollingElement","documentElement","scrollTop","ReloadButton","Header","heading","onReload","StyledSideMenu","SavedButton","SideMenu","showSaved","setShowSaved","Page","location","scrollPos","setScrollPos","currentSearchForSubs","currentPermalinkUrl","currentContext","setCurrentUser","parts","newSort","postId","userSort","user","parseURL","pathname","searchStr","parseSearch","storedSaves","setCurrentPostId","setCurrentUserSort","setPermalinkUrl","setContext","setCurrentSearch","setCurrentSearchSort","setCurrentSearchSub","setSearchForSubs","useCallback","pageYOffset","oldVal","redirectSub","getMainPage","height","overflow","goBack","marginTop","App","path","component","Boolean","hostname","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.48d55fc1.chunk.js","sourcesContent":["import styled from 'styled-components';\n\nconst ButtonGroup = styled.div`\n    display: flex;\n\n    & > div {\n        flex-grow: 1;\n    }\n\n    & > a {\n        flex-grow: 1;\n    }\n\n    & > a.selected, & > button.selected {\n        background-color: gray;\n    }\n\n    & > label {\n        border-left: 1px solid gray;\n    }\n\n    & > *:last-child {\n        border-left: 1px solid gray;\n    }\n\n    & > *:first-child {\n        border-left: none;\n    }\n\n    & .handle {\n        width: 40px;\n        min-width: 40px;\n        height: 31px;\n        border-top: 1px solid gray;\n        border-right: 1px solid gray;\n    }\n\n    & .handle:hover {\n        cursor: pointer;\n    }\n`;\n\nexport default ButtonGroup;","import styled from 'styled-components';\n\nconst ButtonList = styled.div`\n    text-align: center;\n    position: relative;\n\n    & *:focus {\n        outline: none;\n    }\n\n    & * {\n        color: white;\n    }\n\n    & a, & label {\n        width: 100%;\n        display: block;\n        padding: 5px;\n        min-height: 29px;\n        border-top: 1px solid gray;\n        overflow: hidden;\n    }\n\n    & a:hover {\n        background-color: gray;\n    }\n\n    & a.active, & > a.selected {\n        background-color: gray;\n    }\n\n    & > a:last-of-type, & > button:last-of-type {\n        border-bottom: 1px solid gray;\n    }\n\n    & > div:last-child > * {\n        border-bottom: 1px solid gray;\n    }\n\n    @media screen and (max-device-width: 600px){\n        & div:last-child > * {\n            border-bottom: none;\n        }   \n\n        & a:hover {\n            background-color: black;\n        }\n    }\n`;\n\nexport default ButtonList;","import styled from 'styled-components';\n\nconst Input = styled.input`\n    cursor: text;\n    padding: 5px 10px;\n    flex-grow: 1;\n    width: 100%;\n    margin: 0px;\n    background-color: black;\n    border: none;\n    font-size: 1em;\n    text-align: center;\n    border-top: 1px solid gray;\n    border-radius: 0px;\n\n    &[type=\"checkbox\"] {\n        -webkit-appearance:none;\n        appearance: none;\n        width:30px;\n        height:30px;\n        background:white;\n        border-radius:0px;\n        border:1px solid gray;\n        border-right: none;\n        border-left: none;\n\n        :checked {\n            background-color: green;\n        }\n\n        :hover {\n            cursor: pointer;\n        }\n    }\n`;\n\nexport default Input;","import styled from 'styled-components';\n\nconst Button = styled.button`\n    background-color: black;\n    border: none;\n    text-align: center;\n    padding: 5px;\n    font-size: 1em;\n    width: 100%;\n    margin: 0px;\n    border-top: 1px solid gray;\n    color: white;\n\n    ${props => props.selected ? 'background-color: gray;' : ''};\n    ${props => props.disabled ? 'color: gray' : ''};\n\n    &:hover {\n        cursor: pointer;\n        background-color: gray;\n        ${props => props.disabled ? 'background-color: black; cursor: default' : ''};\n    }\n\n    :focus {\n        outline: none;\n    }\n\n    @media screen and (max-device-width: 600px){\n        &:hover {\n            background-color: black;\n        } \n    }\n`;\n\nexport default Button;","import styled from 'styled-components';\nimport Button from './Button';\n\nconst SideButton = styled(Button)`\n    border-left: 1px solid gray;\n    min-width: 60px;\n    width: auto;\n`;\n\nexport default SideButton;","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { NavLink } from 'react-router-dom';\nimport { FaEdit, FaTrashAlt } from 'react-icons/fa';\nimport { TiArrowUnsorted } from 'react-icons/ti';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { ReactSortable } from 'react-sortablejs';\n\nimport ButtonGroup from './Styled/ButtonGroup';\nimport ButtonList from './Styled/ButtonList';\nimport Input from './Styled/Input';\nimport Button from './Styled/Button';\nimport SideButton from './Styled/SideButton';\n\nconst Icon = styled.div`\n    padding: 5px;\n    font-size: 1.3em;\n    position: absolute;\n    right: 10px;\n    top: -5px;\n\n    :hover {\n        cursor: pointer;\n    }\n`;\n\nconst SubList = () => {\n    const dispatch = useDispatch();\n    const currentSub = useSelector(state => state.currentSub);\n    let currentSort = useSelector(state => state.currentSort);\n\n    const subs = useSelector(state => state.subs);\n    const setSubs = (val) => dispatch({type: 'SET_SUBS', payload: val});\n\n    const [editMode, setEditMode] = useState(false);\n    const [newSub, setNewSub] = useState('');\n\n    useEffect(() => {\n        let storedSubs = localStorage.getItem('subs');\n        storedSubs = storedSubs ? JSON.parse(storedSubs) : [];\n        if (storedSubs.length === 0) setEditMode(true);\n        setSubs(storedSubs);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const onToggleEdit = () => {\n        setEditMode(!editMode);\n    }\n\n    const onChangeNewSub = (e) => {\n        setNewSub(e.target.value);\n    }\n\n    const onAddNewSub = () => {\n        if (newSub.length === 0) return;\n        addSubToStorage(subs, newSub);\n    }\n\n    const onDeleteSub = (sub) => () => {\n        let newSubArr = subs.filter(subName => subName !== sub);\n        setSubs(newSubArr);\n        localStorage.setItem('subs', JSON.stringify(newSubArr));\n    }\n\n    const addCurrentSub = () => {\n        addSubToStorage(subs, currentSub);\n    }\n\n    const addSubToStorage = (arr, sub) => {\n        let newSubArr = [...arr, sub];  \n        setSubs(newSubArr);\n        setNewSub('');\n        localStorage.setItem('subs', JSON.stringify(newSubArr));\n    }\n\n    const reorder = (data) => {\n        if (data.length === 0) return;\n        let newSubArr = data.map(sub => sub.id);\n        setSubs(newSubArr);\n        localStorage.setItem('subs', JSON.stringify(newSubArr));\n    }\n\n    if (currentSub === 'user') currentSort = 'hot';\n\n    let displaySubs = subs.map(sub => ({id: sub}));\n\n    return (\n        <ButtonList>\n            <h3>General</h3>\n            <NavLink to={`/My Subreddits/${currentSort}`} className={'My Subreddits' === currentSub ? 'selected' : ''}>My Subreddits</NavLink>\n            <NavLink to={`/Popular/${currentSort}`} className={'Popular' === currentSub ? 'selected' : ''}>Popular</NavLink>\n            <NavLink to={`/All/${currentSort}`} className={'All' === currentSub ? 'selected' : ''}>All</NavLink>\n            <h3>Subs</h3>\n            <Icon onClick={onToggleEdit}><FaEdit/></Icon>\n            {\n                editMode \n                    ? ( <ReactSortable list={displaySubs} setList={reorder} handle=\".handle\">\n                            { displaySubs.map(sub => <CustomSub key={'subButton-'+sub.id} sub={sub} currentSub={currentSub} currentSort={currentSort} onDeleteSub={onDeleteSub} editMode={editMode}/>) }\n                        </ReactSortable> ) \n                    : displaySubs.map(sub => <CustomSub key={'subButton-'+sub.id} sub={sub} currentSub={currentSub} currentSort={currentSort} onDeleteSub={onDeleteSub} editMode={editMode}/>)\n            }\n            {\n                editMode ? (\n                    <ButtonGroup>\n                        <Input type=\"text\" placeholder=\"New Sub\" onChange={onChangeNewSub} value={newSub}/>\n                        <SideButton onClick={onAddNewSub}>Add</SideButton>\n                    </ButtonGroup>\n                ) : null\n            }\n            {\n                !checkIfSubbed(subs, currentSub) ? <Button onClick={addCurrentSub}>Add Current Sub</Button> : null\n            }\n        </ButtonList>\n    );\n}\n\nconst CustomSub = ({sub, currentSub, currentSort, onDeleteSub, editMode}) => {\n    return (\n        <ButtonGroup key={'sub-'+sub.id}>\n            { editMode ? <div className=\"handle\"><TiArrowUnsorted style={{position: 'relative', top: '8px'}}/></div> : null }\n            <NavLink to={`/${sub.id}/${currentSort}`} className={sub.id === currentSub ? 'selected' : ''} style={{textTransform: 'capitalize'}}>{sub.id}</NavLink>\n            { editMode ? <SideButton className=\"subBtn\" onClick={onDeleteSub(sub.id)}><FaTrashAlt/></SideButton> : null }\n        </ButtonGroup>\n    );\n}\n\nconst checkIfSubbed = (subs, currentSub) => {\n    if (currentSub === 'user') return true;\n    if (currentSub.length === 0) return true;\n    if (currentSub === 'Popular') return true;\n    if (currentSub === 'All') return true;\n    if (currentSub === 'My Subreddits') return true;\n    if (subs.includes(currentSub)) return true;\n    return false;\n}\n\nexport default SubList;","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nimport ButtonGroup from './Styled/ButtonGroup';\nimport ButtonList from './Styled/ButtonList';\n\nconst SortMenu = () => {\n    const currentSub = useSelector(state => state.currentSub);\n    const currentSort = useSelector(state => state.currentSort);\n\n    let sortOptions = ['hot', 'new', 'rising', 'controversial', 'top'];\n\n    return (\n        <ButtonList>\n            <h3>Sort Posts</h3>\n            {\n                sortOptions.map(option => {\n                    return (\n                        <ButtonGroup key={'sort-'+option}>\n                            <NavLink to={`/${currentSub}/${option}`} className={option === currentSort ? 'selected' : ''} style={{textTransform: 'capitalize'}}>{option}</NavLink>\n                        </ButtonGroup>\n                    );\n                })\n            }\n        </ButtonList>\n    );\n}\n\nexport default SortMenu;","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\n\nimport ButtonGroup from './Styled/ButtonGroup';\nimport ButtonList from './Styled/ButtonList';\n\nconst UserSortMenu = () => {\n    const dispatch = useDispatch();\n\n    const currentSort = useSelector(state => state.currentSort);\n    const currentSub = useSelector(state => state.currentSub);\n    const currentUserSort = useSelector(state => state.currentUserSort);\n    const closeMenus = () => dispatch({type: 'CLOSE_MENUS'});\n\n    const onClick = (val) => () => {\n        closeMenus();\n    }\n\n    let sortOptions = [\n        {display: 'Overview', value: `overview`}, \n        {display: 'Comments', value: `comments`}, \n        {display: 'Posts', value: `submitted`}, \n    ];    \n\n    return (\n        <ButtonList>\n            <h3>Show</h3>\n            {\n                sortOptions.map(option => {\n                    return (\n                        <ButtonGroup key={'commentSort-'+option.value}>\n                            <NavLink exact to={`/${currentSub}/${currentSort}/${option.value}`} className={option.value === currentUserSort ? 'selected' : ''} onClick={onClick(option.value)}>{option.display}</NavLink>\n                        </ButtonGroup>\n                    );\n                })\n            }\n        </ButtonList>\n    );\n}\n\nexport default UserSortMenu;","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport ButtonGroup from './Styled/ButtonGroup';\nimport ButtonList from './Styled/ButtonList';\nimport Button from './Styled/Button';\n\nconst CommentSortMenu = () => {\n    const dispatch = useDispatch();\n\n    const commentSort = useSelector(state => state.commentSort);\n    const changeCommentSort = (val) => dispatch({type: 'SET_COMMENT_SORT', payload: val});\n    const closeMenus = () => dispatch({type: 'CLOSE_MENUS'});\n\n    const onClick = (val) => () => {\n        closeMenus();\n        changeCommentSort(val);\n    }\n\n    let sortOptions = [\n        {display: 'Best', value: 'confidence'}, \n        {display: 'New', value: 'new'}, \n        {display: 'Top', value: 'top'}, \n        {display: 'Controversial', value: 'controversial'}, \n        {display: 'Q&A', value: 'qa'}\n    ];\n\n    return (\n        <ButtonList>\n            <h3>Sort Comments</h3>\n            {\n                sortOptions.map(option => {\n                    return (\n                        <ButtonGroup key={'commentSort-'+option.value}>\n                            <Button className={option.value === commentSort ? 'selected' : ''} onClick={onClick(option.value)}>{option.display}</Button>\n                        </ButtonGroup>\n                    );\n                })\n            }\n        </ButtonList>\n    );\n}\n\nexport default CommentSortMenu;","import React from 'react';\nimport styled from 'styled-components';\nimport { MdCheckBoxOutlineBlank, MdCheckBox } from 'react-icons/md';\n\nconst StyledCheckbox = styled.div`\n    display: inline-block;\n    font-size: 1.5em;\n    border-top: 1px solid gray;\n\n    & > svg {\n        position: relative;\n        top: 2px;\n    }\n\n    :hover {\n        cursor: pointer;\n    }\n`;\n\nconst Checkbox = ({checked, onClick}) => {\n    return (\n        <StyledCheckbox onClick={onClick}>\n            { checked ? <MdCheckBox/> : <MdCheckBoxOutlineBlank/> }\n        </StyledCheckbox>\n    );\n}\n\nexport default Checkbox;","import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\n\nimport ButtonGroup from './Styled/ButtonGroup';\nimport ButtonList from './Styled/ButtonList';\nimport Input from './Styled/Input';\nimport Button from './Styled/Button';\nimport SideButton from './Styled/SideButton';\nimport Checkbox from './Checkbox';\n\nconst SearchMenu = () => {    \n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const closeMenus = () => dispatch({type: 'CLOSE_MENUS'});\n\n    const currentSub = useSelector(state => state.currentSub);\n    const currentSort = useSelector(state => state.currentSort);\n\n    const currentSearch = useSelector(state => state.currentSearch);    \n    const [search, setSearch] = useState(currentSearch);\n    const onChangeSearch = (e) => setSearch(e.target.value);\n\n    const currentSearchSort = useSelector(state => state.currentSearchSort);\n    const [searchSort, setSearchSort] = useState(currentSearchSort);\n    const onClickRelevant = () => setSearchSort('relevance');\n    const onClickNew = () => setSearchSort('new');\n\n    const currentSearchSub = useSelector(state => state.currentSearchSub);\n    const [searchSub, setSearchSub] = useState(currentSearchSub);\n    const toggleThisSub = () => setSearchSub(!searchSub);\n\n    const onSearch = () => {\n        closeMenus();\n        history.push(`/${currentSub}/${currentSort}?search=${search}&searchSort=${searchSort}&searchSub=${searchSub}&searchForSubs=${false}`);\n    }\n\n    const onSearchSubs = () => {\n        closeMenus();\n        history.push(`/${currentSub}/${currentSort}?search=${search}&searchSort=${searchSort}&searchSub=${searchSub}&searchForSubs=${true}`);\n    }\n\n    const onEnter = (e) => {\n        if (e.key === 'Enter') {\n            onSearch();\n        }\n    }\n\n    const onClearSearch = (getNewPosts=true) => {\n        if (search.length === 0) return; //if there's nothing to clear, don't do anything\n        setSearch('');\n        setSearchSub(true);\n        setSearchSort('relevance');\n        history.push(`/${currentSub}/${currentSort}`);\n    }\n\n    return (\n        <ButtonList>\n            <h3>Search</h3>\n            <ButtonGroup>\n                <Input type=\"text\" placeholder=\"Search\" onChange={onChangeSearch} value={search} onKeyPress={onEnter}/>\n                <SideButton onClick={onSearch} disabled={currentSub === 'user' ? true : false}>Search</SideButton>\n            </ButtonGroup>\n            <ButtonGroup>\n                <Checkbox checked={searchSub} onClick={toggleThisSub}/>\n                <label style={{width: '100%'}}>This Sub Only</label>\n            </ButtonGroup>\n            <ButtonGroup>\n                <Button selected={searchSort === 'new'} onClick={onClickNew}>New</Button>\n                <Button selected={searchSort === 'relevance'} onClick={onClickRelevant}>Relevant</Button>\n            </ButtonGroup>\n            <ButtonGroup>\n                <Button onClick={onSearchSubs} disabled={currentSub === 'user' ? true : false}>Search Subs</Button>\n                <Button onClick={onClearSearch}>Clear Search</Button>\n            </ButtonGroup>\n        </ButtonList>\n    );\n}\n\nexport default SearchMenu;","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\n\nimport ButtonGroup from './Styled/ButtonGroup';\nimport ButtonList from './Styled/ButtonList';\n\nconst SubList = () => {\n    const saved = useSelector(state => state.saved);\n    const currentPostId = useSelector(state => state.currentPostId);\n\n    return (\n        <ButtonList>\n            <h3>Saved</h3>\n            {\n                saved.map(obj => {\n                    return (\n                        <ButtonGroup key={'save-'+obj.id}>\n                            <NavLink to={obj.url} className={obj.id === currentPostId ? 'selected' : ''} style={{textTransform: 'capitalize', fontSize: '0.9em'}}>{obj.sub} - {obj.title}</NavLink>\n                        </ButtonGroup>\n                    )\n                })\n            }\n        </ButtonList>\n    );\n}\n\nexport default SubList;","import React from 'react';\nimport styled from 'styled-components';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport SubList from './SubList';\nimport SortMenu from './SortMenu';\nimport UserSortMenu from './UserSortMenu';\nimport CommentSortMenu from './CommentSortMenu';\nimport SearchMenu from './SearchMenu';\nimport SaveList from './SaveList';\n\nconst StyledTopMenu = styled.div`\n    border-bottom: 1px solid red;\n    position: fixed;\n    width: 100%;\n    background-color: black;\n    z-index: 6;\n\n    & > div:last-child,  & > div:nth-last-child(2){\n        float: right;\n        border-right: none;\n        border-left: 1px solid gray;\n    }\n`;\n\nconst MenuButton = styled.div`\n    display: inline-block;\n    padding: 8px;\n    border-right: 1px solid gray;\n    min-width: 50px;\n    text-align: center;\n    background-color: ${props => props.selected ? 'gray' : 'none'};\n`;\n\nconst Dropdown = styled.div`\n    position: fixed;\n    width: ${props => props.width ? props.width : '250px'};\n    background-color: black;\n    z-index: 5;\n    top: 35px;\n    border-right: 1px solid red;\n    border-bottom: 1px solid red;\n    max-height: calc(100% - 50px);\n    overflow: scroll;\n    ${ props => props.right \n            ? 'right: 0px; border-left: 1px solid red; border-right: none;' \n            : '' };\n`;\n\nconst TopMenu = ({onBackClick}) => {\n    const dispatch = useDispatch();\n\n    const searchMenuOpen = useSelector(state => state.searchMenuOpen);\n    const onClickSearch = () => searchMenuOpen ? dispatch({type: 'CLOSE_SEARCH'}) : dispatch({type: 'OPEN_SEARCH'});\n\n    const subMenuOpen = useSelector(state => state.subMenuOpen);\n    const onClickSubs = () => subMenuOpen ? dispatch({type: 'CLOSE_SUBS'}) : dispatch({type: 'OPEN_SUBS'});\n\n    const sortMenuOpen = useSelector(state => state.sortMenuOpen);\n    const onClickSort = () => sortMenuOpen ? dispatch({type: 'CLOSE_SORT'}) : dispatch({type: 'OPEN_SORT'});\n\n    const saveMenuOpen = useSelector(state => state.saveMenuOpen);\n    const saved = useSelector(state => state.saved);\n    const onClickSave = () => saveMenuOpen ? dispatch({type: 'CLOSE_SAVED'}) : dispatch({type: 'OPEN_SAVED'});\n\n    const currentPostId = useSelector(state => state.currentPostId);\n    const currentSub = useSelector(state => state.currentSub);\n\n    return (\n        <React.Fragment>\n            <StyledTopMenu>\n                <MenuButton onClick={onClickSubs} selected={subMenuOpen}>Subs</MenuButton>\n                { saved.length > 0 ? <MenuButton onClick={onClickSave} selected={saveMenuOpen}>Saved</MenuButton> : null }\n                { currentPostId.length > 0 ? <MenuButton onClick={onBackClick}>Back</MenuButton> : null }\n                <MenuButton onClick={onClickSort} selected={sortMenuOpen}>Sort</MenuButton>\n                <MenuButton onClick={onClickSearch} selected={searchMenuOpen}>Search</MenuButton>\n            </StyledTopMenu>\n            { saveMenuOpen ? <Dropdown width=\"300px\"><SaveList/></Dropdown> : null }\n            { subMenuOpen ? <Dropdown><SubList/></Dropdown> : null }\n            { sortMenuOpen && currentSub === 'user' ? <Dropdown right={true}><UserSortMenu/></Dropdown> : null }\n            { sortMenuOpen && currentSub !== 'user' && currentPostId.length === 0 ? <Dropdown right={true}><SortMenu/></Dropdown> : null }\n            { sortMenuOpen && currentSub !== 'user' && currentPostId.length > 0 ? <Dropdown right={true}><CommentSortMenu/></Dropdown> : null }\n            { searchMenuOpen ? <Dropdown right={true}><SearchMenu/></Dropdown> : null }\n        </React.Fragment>\n    );\n};\n\nexport default TopMenu;","const initialState = {\n    currentSub: '',\n    currentSort: 'hot',\n    currentPostId: '',\n    currentUserSort: 'overview',\n    currentUser: '',\n\n    postDetails: {},\n    posts: [],\n    noPosts: false,\n    noMorePosts: false,\n    latestPost: '',\n\n    comments: [],\n    extraComments: [],\n    noComments: false,\n    commentSort: 'new',\n\n    subs: [],\n    saved: [],\n\n    sortMenuOpen: false,\n    searchMenuOpen: false,\n    subMenuOpen: false,\n    saveMenuOpen: false,\n\n    currentSearch: '',\n    currentSearchSort: 'relevance',\n    currentSearchSub: true,\n    searchForSubs: false,\n\n    previousUrl: '',\n    permalinkUrl: '',\n    showContext: false,\n};\n\nexport const reducer = (state = initialState, action={}) => {\n    const data = action.payload;    \n    switch(action.type){\n        case 'SET_SUB': return {...state, currentSub: data};\n        case 'SET_SORT': return {...state, currentSort: data};\n        case 'SET_POSTID': return {...state, currentPostId: data};\n        case 'SET_USER_SORT': return {...state, currentUserSort: data};\n        case 'SET_USER': return {...state, currentUser: data};\n\n        case 'SET_POSTS': return {...state, posts: data};\n        case 'SET_POST_DETAILS': return {...state, postDetails: data, extraComments: []};\n\n        case 'CLEAR_SEARCH': return {...state, currentSearch: '', currentSearchSort: 'relevance', currentSearchSub: true, searchMenuOpen: false};\n        case 'OPEN_SEARCH': return {...state, searchMenuOpen: true, sortMenuOpen: false, subMenuOpen: false, saveMenuOpen: false};\n        case 'CLOSE_SEARCH': return {...state, searchMenuOpen: false};\n\n        case 'OPEN_SUBS': return {...state, subMenuOpen: true, sortMenuOpen: false, searchMenuOpen: false, saveMenuOpen: false};\n        case 'CLOSE_SUBS': return {...state, subMenuOpen: false};\n\n        case 'OPEN_SORT': return {...state, sortMenuOpen: true, subMenuOpen: false, searchMenuOpen: false, saveMenuOpen: false};\n        case 'CLOSE_SORT': return {...state, sortMenuOpen: false};\n\n        case 'OPEN_SAVED': return {...state, saveMenuOpen: true, sortMenuOpen: false, subMenuOpen: false, searchMenuOpen: false};\n        case 'CLOSE_SAVED': return {...state, saveMenuOpen: false};\n\n        case 'CLOSE_MENUS': return {...state, sortMenuOpen: false, searchMenuOpen: false, subMenuOpen: false, saveMenuOpen: false};\n\n        case 'SET_SUBS': return {...state, subs: data};\n        case 'SET_SAVED': return {...state, saved: data};\n\n        case 'SET_CURRENT_SEARCH': return {...state, currentSearch: data};\n        case 'SET_CURRENT_SEARCH_SORT': return {...state, currentSearchSort: data};\n        case 'SET_CURRENT_SEARCH_SUB': return {...state, currentSearchSub: data};\n        case 'SET_SEARCH_FOR_SUBS': return {...state, searchForSubs: data};\n\n        case 'SET_NO_POSTS': return {...state, noPosts: data};\n        case 'SET_LATEST_POST': return {...state, latestPost: data};\n        case 'SET_NO_MORE_POSTS': return {...state, noMorePosts: data};\n\n        case 'SET_COMMENTS': return {...state, comments: data};\n        case 'SET_EXTRA_COMMENTS': return {...state, extraComments: data};\n        case 'SET_NO_COMMENTS': return {...state, noComments: data};\n        case 'SET_COMMENT_SORT': return {...state, commentSort: data};\n\n        case 'SET_PREVIOUS_URL': return {...state, previousUrl: data};\n        case 'SET_PERMALINK_URL': return {...state, permalinkUrl: data};\n        case 'SET_SHOW_CONTEXT': return {...state, showContext: data};\n        default: return state;\n    }\n};","import { createStore } from 'redux';\nimport { reducer } from './reducers';\n\nconst store = createStore(reducer);\n\nexport default store;","import store from '../redux/store';\nimport { batch } from 'react-redux';\n\nconst parseComment = (obj, parent=null) => {        \n    //adding support for more comment loading within replies\n    if (obj.kind === 'more') {        \n        let permalink = parent !== null ? parent.data.permalink.match(/\\/r\\/[a-zA-Z0-9]+\\/comments\\/[a-zA-Z0-9]+\\/([a-zA-Z0-9_]+)\\//)[1] : '';\n        return {\n            kind: 'more',\n            id: obj.data.parent_id.replace('t1_',''),\n            body_html: '',\n            name: '',\n            author: '',\n            replies: [],\n            score: 0,\n            permalink: permalink\n        };\n    }\n    \n    let comment = obj.data;\n    let {body_html, id, name, author, permalink, replies, score, created_utc, parent_id} = comment;\n    body_html = parseBodyText(body_html);\n    \n    replies = typeof replies === 'object' ? replies.data.children : [];\n    \n    replies = replies.map(comment => {\n        return parseComment(comment, obj);\n    });\n\n    const hasContext = !parent_id.includes('t3_');\n    \n    return {body_html, id, name, author, permalink, replies, score, created_utc, hasContext};\n}\n\nconst parseLinks = (text) => {\n    //make sure any links within the body open in a new tab\n    text = text.replace(/<a/g, '<a target=\"_blank\" rel=\"noopener noreferrer\"');\n    \n    //make sure links to reddit users are adjusted\n    text = text.replace(/href=\"\\/u/g, 'href=\"https://www.reddit.com/$1');\n    \n    //but links to other reddit subs can be kept on this website\n    text = text.replace(/target=\"_blank\" rel=\"noopener noreferrer\" href=\"\\/r/g, 'href=\"#');  \n\n    //replace full links to reddit with local links to stay on this website\n    let redditMatches = text.match(/href=\"https:\\/\\/www.reddit.com\\/r\\/[a-zA-Z0-9]+\\/comments\\/[a-zA-Z0-9]+/g);\n    if (redditMatches !== null) redditMatches.forEach(match => {\n        let sub = match.match(/r\\/([a-zA-Z0-9]+)/)[1];\n        let id = match.match(/comments\\/([a-zA-Z0-9]+)/)[1];\n        text = text.replace(`target=\"_blank\" rel=\"noopener noreferrer\" ${match}`, `href=\"#/${sub}/comments/${id}`);\n    });\n\n    return text;\n}\n\nconst parseBodyText = (text) => {\n    text ? text = text\n                    .replace(/&lt;/g,'<')\n                    .replace(/&gt;/g,'>')\n                    .replace(/&amp;#39;/g,\"'\")\n                    .replace(/&amp;quot;/g,'\"')\n                    .replace(/&amp;/g,\"&\")\n                    .replace(/&#x200B;/g,' ')\n                        : text = '';\n    return text;\n}\n\nconst parseURL = (url) => {\n    let parts = url.split('/');\n    let sub = '';\n    let newSort = '';\n    let postId = '';\n    let userSort = '';\n    let permalinkUrl = '';\n    let user = '';\n\n    if (parts.length > 0) {\n        parts[1] !== undefined ? sub = parts[1] : sub = '';\n        parts[2] === 'comments' && parts[3] !== undefined ? postId = parts[3] : postId = '';\n        parts[2] !== 'comments' && parts[2] !== undefined ? newSort = parts[2] : newSort = '';\n        if (parts[2] !== 'comments' && parts[2] === undefined) newSort = 'hot';\n        if (parts[1] === 'user' && parts[3] !== undefined) userSort = parts[3];\n        if (parts[1] === 'user' && parts[3] === undefined) userSort = 'overview';\n        if (parts[1] === 'user' && parts[2] !== undefined) { user = parts[2]; newSort = ''; }\n        if ([parts[2] === 'comments'] && parts[4] !== undefined && parts[5] !== undefined) permalinkUrl = parts[4] + '/' + parts[5];\n    }    \n\n    return {sub, newSort, postId, userSort, permalinkUrl, user};\n}\n\nconst parseBool = (str) => {\n    return str === 'true' ? true : false;\n}\n\nconst parseSearch = (searchStr) => {\n    let search = searchStr.match(/search=([a-zA-Z0-9% ]+)/);\n    let searchSort = searchStr.match(/searchSort=(relevance|new)/);\n    let searchSub = searchStr.match(/searchSub=(true|false)/);\n    let searchForSubs = searchStr.match(/searchForSubs=(true|false)/);\n    \n    search = search === null ? '' : search[1];\n    searchSort = searchSort === null ? 'relevance' : searchSort[1];\n    searchSub = searchSub === null ? true : parseBool(searchSub[1]);\n    searchForSubs = searchForSubs === null ? false : parseBool(searchForSubs[1]);\n\n    search = search.replace(/%20/g, ' ');\n    \n    return {search, searchSort, searchSub, searchForSubs};\n}\n\nconst getMySubs = (prepend) => {\n    let currentSub = '';\n    let storedSubs = localStorage.getItem('subs');\n    storedSubs = storedSubs ? JSON.parse(storedSubs) : [];\n    currentSub = prepend+storedSubs.join('+');\n    if (storedSubs.length === 0) currentSub = prepend+'All';\n    return currentSub;\n}\n\nconst getPostList = async (loadMore=false, force=false) => {\n    const state = store.getState();\n    let { posts, currentSub, currentSort, currentUser, currentUserSort, currentSearch, currentSearchSort, currentSearchSub, latestPost, searchForSubs, previousUrl } = state;\n    const setLatestPost = (val) => store.dispatch({type: 'SET_LATEST_POST', payload: val});\n    const setPosts = (val) => store.dispatch({type: 'SET_POSTS', payload: val});\n    const setNoPosts = (val) => store.dispatch({type: 'SET_NO_POSTS', payload: val});\n    const setNoMorePosts = (val) => store.dispatch({type: 'SET_NO_MORE_POSTS', payload: val});\n    const setPreviousUrl = (val) => store.dispatch({type: 'SET_PREVIOUS_URL', payload: val});\n\n    //if no sub, then don't get anything\n    if (currentSub.length === 0) return;\n\n    if (currentSub.length > 0) currentSub = 'r/'+currentSub;    \n\n    if (currentSub === 'r/My Subreddits') currentSub = getMySubs('r/');\n    \n    try {\n        let url = `https://www.reddit.com/${currentSub}/${currentSort}/.json`;\n        if (loadMore) url += `?after=${latestPost}`;\n\n        if (currentSearch.length > 0) {\n            let parsedStr = currentSearch.split(' ').join('+');\n            if (searchForSubs) url = `https://www.reddit.com/${currentSub}/search.json?q=${parsedStr}&include_over_18=on&sort=relevance&type=sr`;\n            else url = `https://www.reddit.com/${currentSub}/search.json?q=${parsedStr}${currentSearchSub ? '&restrict_sr=on' : ''}&include_over_18=on&sort=${currentSearchSort}`;\n\n            if (loadMore) {\n                url += `&after=${latestPost}`;\n            }\n        }\n\n        if (currentSub.length === 0) url = 'https://www.reddit.com/.json';        \n\n        if (currentSub === 'r/user') {\n            url = `https://www.reddit.com/user/${currentUser}/${currentUserSort}.json`;  \n            if (loadMore) url += `?after=${latestPost}`;\n        }\n\n        if (url === previousUrl && force === false) return;\n        else {\n            let baseUrl = url.replace(/\\?after=[a-zA-Z0-9_]+/, '');\n            setPreviousUrl(baseUrl);\n        }\n\n        if (!loadMore) {\n            setPosts([]);\n            setNoPosts(false);\n            setNoMorePosts(false);\n        }        \n\n        let response = await fetch(url);\n        let data = await response.json();\n\n        if (data.error){\n            console.log('Getting Post List - Error: ', data.error);\n            if (!loadMore) {\n                batch(() => {\n                    setNoPosts(true);\n                    setPosts([]);\n                });\n            }\n        } else {\n            if (data && data.data && data.data.children){\n                let newPosts = data.data.children.map(post => {                    \n                    const data = post.data;\n\n                    let media = data.media;\n                    if (media && media.oembed){\n                        media = parseBodyText(media.oembed.html);\n                    } else {\n                        media = '';\n                    }                    \n\n                    if (post.kind === 't5') return {\n                        id: data.id,\n                        name: data.name,\n                        type: 'sub',\n                        title: parseBodyText(data.title),\n                        subName: data.display_name,\n                        description: parseBodyText(data.description_html),\n                        created: data.created_utc,\n                        subscribers: data.subscribers,\n                    }\n\n                    if (post.kind === 't1') {\n                        let comment = parseComment(post);                        \n                        comment.type = 'comment';\n                        comment.link_title = data.link_title;\n                        comment.link_id = data.link_id;\n                        comment.subreddit = data.subreddit;\n                        return comment;\n                    }\n                    \n                    return {\n                        type: 'post',\n                        created: data.created_utc,\n                        author: data.author,\n                        domain: data.domain,\n                        title: parseBodyText(data.title),\n                        id: data.id,\n                        name: data.name,\n                        body: parseBodyText(data.selftext_html),\n                        num_comments: data.num_comments,\n                        score: data.score,\n                        subreddit: data.subreddit,\n                        stickied: data.stickied,\n                        url: data.url,\n                        thumbnail: data.thumbnail, //if no thumbnail - \"self\"\n                        permalink: data.permalink,\n                        media: media,\n                        media_embed: data.media_embed\n                    };\n                });\n\n                let noMore = newPosts.length === 0 ? true : false;\n                if (loadMore) newPosts = [...posts, ...newPosts];\n\n                batch(() => {\n                    if (!noMore) setLatestPost(newPosts[newPosts.length-1].name);                                \n                    setPosts(newPosts);\n                    if (noMore) setNoMorePosts(true);\n                    if (noMore && !loadMore) setNoPosts(true);\n                });\n            }\n        }\n    } catch (error) {\n        console.log('Getting Post List - URL Error: ', error);\n        if (!loadMore) {\n            batch(() => {\n                setNoPosts(true);\n                setPosts([]);\n            });\n        }\n    }\n};\n\nconst getMoreComments = async (id, fullUrl) => {\n    const state = store.getState();\n    const { extraComments, currentSub, currentPostId } = state;\n    const setExtraComments = (val) => store.dispatch({type: 'SET_EXTRA_COMMENTS', payload: val});\n\n    try {\n        let response = await fetch(`https://www.reddit.com/r/${currentSub}/comments/${currentPostId}/${fullUrl}/${id}.json`);\n        let data = await response.json();\n\n        if (data.error) {\n            console.log('Getting More Comments - Error: ', data.error);\n        } else {\n            let newComments = data[1].data.children.map(obj => {\n                return parseComment(obj);\n            });\n            \n            //make sure it doesn't already exist in case it tried to load more twice\n            let parentComment = newComments[0];\n            let check = extraComments.find(obj => obj.id === parentComment.id);\n            if (check === undefined) {\n                let newExtras = [...extraComments, parentComment];\n                setExtraComments(newExtras);\n            }\n        }\n    } catch (error) {\n        console.log('Getting More Comments - URL Error: ', error);\n    }\n}\n\nconst getComments = async () => {\n    const state = store.getState();\n    let { currentSub, currentPostId, commentSort, permalinkUrl, showContext } = state;\n    const setComments = (val) => store.dispatch({type: 'SET_COMMENTS', payload: val});\n    const setNoComments = (val) => store.dispatch({type: 'SET_NO_COMMENTS', payload: val});\n    const setPostDetails = (val) => store.dispatch({type: 'SET_POST_DETAILS', payload: val});\n\n    if (currentPostId.length === 0) return;\n\n    setComments([]);\n    setNoComments(false);\n    \n    if (currentSub === 'My Subreddits') currentSub = getMySubs();\n\n    let url = `${currentSub}/comments/${currentPostId}/${permalinkUrl}`;    \n    let context = showContext && permalinkUrl.length > 0 ? 10000 : 0;\n\n    try {        \n        let response = await fetch(`https://www.reddit.com/r/${url}.json?sort=${commentSort}&context=${context}`);\n        let data = await response.json();\n        \n        if (data.error){\n            console.log('Getting Comments - Error: ', data.error);\n        } else {\n            let {title, selftext_html, id, url, media, media_embed, media_metadata, is_gallery, gallery_data, author, created_utc, permalink} = data[0].data.children[0].data;\n\n            let comments = data[1].data.children.map(obj => {\n                return parseComment(obj);\n            });\n\n            batch(() => {\n                setPostDetails({id, url, title, author, created:created_utc, body: parseBodyText(selftext_html), media, media_embed, permalink, media_metadata, is_gallery, gallery_data});\n                setComments(comments);\n                if (comments.length === 0) setNoComments(true);\n            });\n        }\n    } catch (error) {\n        console.log('Getting Comments - URL Error: ', error);\n    }\n};\n\nconst updatePostDetails = () => {\n    const posts = store.getState().posts;\n    const currentPostId = store.getState().currentPostId;\n    const setPostDetails = (val) => store.dispatch({type: 'SET_POST_DETAILS', payload: val});\n\n    let post = undefined;\n    if (currentPostId.length > 0) post = posts.find(post => post.id === currentPostId);\n    if (post === undefined) setPostDetails({});\n    else setPostDetails(post);  \n}\n\nexport {\n    parseComment, \n    parseBodyText,\n    parseLinks,\n    parseURL,\n    parseSearch,\n    getPostList,\n    getComments,\n    getMoreComments,\n    updatePostDetails\n}","import styled from 'styled-components';\n\nconst PostTitle = styled.div`\n    margin-top: 10px;\n    padding-right: 5px;\n\n    & :hover {\n        cursor: pointer;\n    }\n\n    @media screen and (max-device-width: 600px){\n        font-size: 0.9em;\n    }\n`;\n\nexport default PostTitle;","import styled from 'styled-components';\n\nconst PostTextGroup = styled.div`\n    display: flex;\n    flex-direction: column; \n    height: 100%;\n    align-content: center;\n\n    & > div {\n        margin-top: auto;\n        margin-bottom: auto;\n    }\n`;\n\nexport default PostTextGroup;","import styled from 'styled-components';\n\nconst PostDetails = styled.div`\n    font-size: 0.9em;\n    color: gray;\n    margin-top: 5px;\n    margin-bottom: 5px;\n\n    & a {\n        color: gray;\n    }\n`;\n\nexport default PostDetails;","import styled from 'styled-components';\n\nconst PostExpand = styled.div`\n    display: inline-flex;\n    position: relative;\n    float: right;\n    border-bottom: 1px solid ${props => props.stickied ? '#50ec11' : 'red'};\n    border-left: 1px solid ${props => props.stickied ? '#50ec11' : 'red'};\n    color: gray;\n    width: 32px;\n    height: 32px;\n\n    & > svg {\n        margin: auto;\n    }\n\n    &:hover {\n        cursor: pointer;\n        color: white;\n    }\n`;\n\nexport default PostExpand;","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { NavLink } from 'react-router-dom';\nimport { FaRegComment, FaChevronUp, FaChevronDown } from 'react-icons/fa';\nimport { formatDistanceStrict } from 'date-fns';\n\nimport { parseLinks } from '../functions/useful';\n\nimport PostTitle from './Styled/PostTitle';\nimport PostTextGroup from './Styled/PostTextGroup';\nimport PostDetails from './Styled/PostDetails';\nimport PostExpand from './Styled/PostExpand';\n\nconst StyledPostLink = styled.div`\n    border: 1px solid ${props => props.stickied ? '#50ec11' : 'red'};\n    padding: 0px 0px 0px 10px;\n    margin: 5px auto;\n    width: 95%;\n    max-width: 1200px;\n    display: flex;\n    position: relative;\n`;\n\nconst PostThumbnail = styled.div`\n    min-width: 70px;\n    max-width: 70px;\n    max-height: 70px;\n    overflow: hidden;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    margin-right: 10px;\n    margin-bottom: 10px;\n    margin-top: 10px;\n\n    & > img {\n        height: 70px;\n        width: auto;\n        margin: auto;\n    }\n`;\n\nconst PostComments = styled.div`\n    font-size: 0.9em;\n    display: inline-block;\n    margin-bottom: 10px;\n    cursor: pointer;\n\n    & > span > svg {\n        position: relative;\n        top: 2px;\n        margin-left: 2px;\n    }\n`;\n\nconst PostBody = styled.div`\n    padding: 5px;\n    overflow: hidden;\n\n    & img {\n        max-width: 95%;\n        max-height: 900px;\n    }\n\n    & iframe {\n        max-width: 100%;\n        margin: auto;\n        display: block;\n    }\n\n    & a {\n     color: rgb(0, 225, 255);\n    }\n\n    & .embedly-card-hug {\n        background-color: white;\n        margin: 5px !important;\n    }\n`;\n\nconst PostLink = ({ post, onClickLink, currentSub, currentSort }) => {\n    const [expanded, setExpanded] = useState(false);\n\n    const onToggleExpand = () => {\n        setExpanded(!expanded);\n    }\n\n    if (post === undefined) return <span></span>;\n\n    //get relative time string\n    let dateString = formatDistanceStrict(new Date(), post.created*1000);\n\n    //set whether to show a thumbnail or not\n    let showThumbnail = false;\n    if (/(.jpg|.png|.bmp|.jpeg)/.test(post.thumbnail) === true) showThumbnail = true;\n\n    //make sure any links within the body open in a new tab\n    post.body = parseLinks(post.body);\n\n    //decide whether to show image preview in body\n    let bodyContent = <PostBody dangerouslySetInnerHTML={{__html: post.body}}></PostBody>;\n    let bodyHasImage = false;\n    if (post.url.match(/.(jpg|png|bmp|gif|jpeg)$/)){\n        bodyContent = (<PostBody><img src={post.url} alt=\"Preview user linked to\" /></PostBody>);\n        bodyHasImage = true;\n    }\n\n    //decide whether to show embeded media\n    if (post.media.length > 0){\n        if (post.body.length > 0) post.media += \"<br/>\"+post.body;\n        let media = parseLinks(post.media);\n        bodyContent = <PostBody dangerouslySetInnerHTML={{__html: media}}></PostBody>;\n        bodyHasImage = true;\n    }\n\n    //show embedded reddit video\n    if (post.url.includes('v.redd.it')) {        \n        let url = `https://www.reddit.com${post.permalink}?ref=share&ref_source=embed`;\n        bodyContent = <PostBody>\n            <blockquote className=\"reddit-card\">\n                <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{post.title}</a>\n            </blockquote>\n        </PostBody>;\n        bodyHasImage = true;\n    }\n\n    //decide whether to show an open button for post body\n    let openBtn = true;\n    if (post.body.length === 0 && bodyHasImage === false) openBtn = false;\n    \n    //check if sticked and add another class\n    let stickied = post.stickied ? true : false;\n\n    return (\n        <StyledPostLink stickied={stickied}>\n            { showThumbnail ? <PostThumbnail><img src={post.thumbnail} alt=\"Thumbnail\"/></PostThumbnail> : null }\n            <div style={ showThumbnail ? {width: '100%', maxWidth: 'calc(100% - 80px)'} : {width: '100%', maxWidth: '100%'}}>\n                { openBtn ? <PostExpand onClick={onToggleExpand} stickied={stickied}>{ expanded ? <FaChevronUp/> : <FaChevronDown/> }</PostExpand> : null }\n                <PostTextGroup>\n                    <div>\n                        <PostTitle><span onClick={onClickLink(`/${currentSub}/comments/${post.id}`)}>{post.title}</span></PostTitle>\n                        <PostDetails>\n                            <NavLink to={`/${post.subreddit}/${currentSort}`}>{post.subreddit}</NavLink>{ post.url.includes('v.redd.it') ? <span> - video</span> : <span> - <a href={post.url} target=\"_blank\" rel='noreferrer noopener'>{post.domain}</a></span> } - <span>{dateString}</span>\n                        </PostDetails>\n                        { expanded ? bodyContent : null }\n                        <div>\n                            <PostComments><span onClick={onClickLink(`/${currentSub}/comments/${post.id}`)}>{post.num_comments} <FaRegComment/></span></PostComments>\n                            <span style={{marginLeft: '15px'}}><a href={`https://www.reddit.com${post.permalink}`} target=\"_blank\" rel=\"noreferrer noopener\">Open on Reddit</a></span>\n                        </div>\n                    </div>\n                </PostTextGroup>\n            </div>\n        </StyledPostLink>\n    );\n}\n\nconst areEqual = (prevProps, nextProps) => {    \n    if (prevProps.post.id === nextProps.post.id) return true;\n    return false;\n}\n\nexport default React.memo(PostLink, areEqual);","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { NavLink } from 'react-router-dom';\nimport { FaPlus, FaChevronDown, FaChevronUp } from 'react-icons/fa';\nimport { formatDistanceStrict } from 'date-fns';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { parseLinks } from '../functions/useful';\n\nimport PostTitle from './Styled/PostTitle';\nimport PostTextGroup from './Styled/PostTextGroup';\nimport PostDetails from './Styled/PostDetails';\nimport PostExpand from './Styled/PostExpand';\n\nconst StyledPostLink = styled.div`\n    border: 1px solid ${props => props.stickied ? '#50ec11' : 'red'};\n    padding: 0px 0px 0px 10px;\n    margin: 5px auto;\n    width: 95%;\n    max-width: 1200px;\n    display: flex;\n    position: relative;\n`;\n\nconst AddSubBtn = styled.div`\n    width: 45px;\n    height: 45px;\n    margin: 5px 5px 5px -5px;\n    border: 1px solid ${props => props.stickied ? '#50ec11' : 'red'};\n    display: flex;\n    align-items: center;\n\n    & > svg {\n        font-size: 1.5em;\n        margin: auto;\n    }\n\n    :hover {\n        cursor: pointer;\n        background-color: gray;\n    }\n`;\n\nconst SubLink = ({ sub, currentSort }) => {\n    const dispatch = useDispatch();\n    const [expanded, setExpanded] = useState(false);\n    const subs = useSelector(state => state.subs);\n    const setSubs = (val) => dispatch({type: 'SET_SUBS', payload: val});\n\n    const onToggleExpand = () => {\n        setExpanded(!expanded);\n    }\n\n    if (sub === undefined) return <span></span>;\n\n    //get relative time string\n    let dateString = formatDistanceStrict(new Date(), sub.created*1000);\n\n    let description = parseLinks(sub.description);\n\n    //decide whether to show an open button for post body\n    let openBtn = true;\n    if (description.length === 0) openBtn = false;    \n\n    const addSub = () => {\n        let newSubArr = [...subs, sub.subName];  \n        setSubs(newSubArr);\n        localStorage.setItem('subs', JSON.stringify(newSubArr));\n    }\n\n    const alreadySubbed = subs.reduce((a,c) => {\n        if (c.toLowerCase() === sub.subName.toLowerCase()) a++;\n        return a;\n    }, 0);\n\n    return (\n        <StyledPostLink stickied={alreadySubbed}>\n            { !alreadySubbed ? <AddSubBtn onClick={addSub} stickied={alreadySubbed}><FaPlus/></AddSubBtn> : null }\n            <div style={{width: '100%', maxWidth: '100%'}}>\n                { openBtn ? <PostExpand onClick={onToggleExpand} stickied={alreadySubbed}>{ expanded ? <FaChevronUp/> : <FaChevronDown/> }</PostExpand> : null }\n                <PostTextGroup>\n                    <div>\n                        <PostTitle><NavLink to={`/${sub.subName}/${currentSort}`}>{sub.title}</NavLink></PostTitle>\n                        <PostDetails>\n                            <span>{sub.subName}</span> - <span>{sub.subscribers > 0 ? sub.subscribers : 0} {sub.subscribers !== 1 ? 'members' : 'member'}</span> - <span>{dateString}</span>\n                        </PostDetails>\n                        { expanded ? <span dangerouslySetInnerHTML={{__html: description}}></span> : null }\n                    </div>\n                </PostTextGroup>\n            </div>\n        </StyledPostLink>\n    );\n}\n\nconst areEqual = (prevProps, nextProps) => {    \n    if (prevProps.sub.id === nextProps.sub.id) return true;\n    return false;\n}\n\nexport default React.memo(SubLink, areEqual);","import React from 'react';\nimport styled from 'styled-components';\n\nimport Comment from './Comment';\n\nconst StyledCommentList = styled.div`\n    margin-top: 10px;\n\n    & > div {\n        margin-bottom: 5px;\n    }\n`;\n\nconst CommentList = ({comments, author}) => {\n    if (comments.length === 0) return null;\n\n    return (\n        <StyledCommentList id=\"commentList\">\n            {\n                comments.map(comment => {\n                    return <Comment key={comment.id} comment={comment} author={author}/>\n                })\n            }\n        </StyledCommentList>\n    );\n}\n\nexport default CommentList;","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport styled from 'styled-components';\nimport { formatDistanceStrict } from 'date-fns';\n\nimport { parseLinks, getMoreComments } from '../functions/useful';\n\nimport CommentList from './CommentList';\n\nconst StyledComment = styled.div`\n    padding: 5px;\n    padding-bottom: 0px;\n    border-left: 1px solid red;\n    border-top: 1px solid red;\n    margin-bottom: 0px;\n    transition: border-left 0.5s;\n\n    ${props => {\n        if (props.single) {\n            return `\n                border: 1px solid red;\n                width: 95%;\n                max-width: 1200px;\n                margin: 5px auto;\n            `;\n        }\n    }}\n\n    & a {\n        color: rgb(0, 225, 255);\n    }\n\n    & pre {\n        overflow: scroll;\n    }\n\n    :hover {\n        border-left: 1px solid #fcc203;\n    }\n`;\n\nconst CommentClose = styled.span`\n    :hover {\n        cursor: pointer;\n    }\n`;\n\nconst CommentAuthor = styled.a`\n    color: white !important;\n\n    ${props => props.original ? `\n        color: #059afe !important; \n        font-weight: bold;\n    ` : ''};\n`;\n\nconst CommentFooter = styled.div`\n    font-size: 0.8em;\n    margin-bottom: 5px;\n    color: gray;\n\n    & > span:hover, & > div:hover {\n        cursor: pointer;\n    }\n\n    & > div {\n        margin-top: 10px;\n        font-size: 1.2em;\n        display: inline-block;\n    }\n    \n    & > a {\n        color: gray;\n    }\n`;\n\nconst CommentLinkTitle = styled.div`\n    margin-bottom: 10px;\n\n    :hover {\n        cursor: pointer;\n    }\n`;\n\nconst Comment = ({comment, author, single=false, onClickLink}) => {  \n    const [closed, setClosed] = useState(false);\n    const extraComments = useSelector(state => state.extraComments);\n    const permalinkUrl = useSelector(state => state.permalinkUrl);\n\n    let permalinkId = permalinkUrl.split('/')[1];\n    let permalinkComment = permalinkId === comment.id;\n\n    //test if extra comments have been loaded for this one\n    let extras = extraComments.find(obj => obj.id === comment.id && comment.kind !== 'more');\n    if (extras !== undefined) {                \n        extras = extras.replies;\n    } else {\n        extras = [];\n    }\n\n    //if there are any replies to this comment, create a new Comments object (will work recursively)\n    let replies = \"\";\n    if (extras.length > 0) {\n        replies = <CommentList comments={extras} author={author}/>;\n    } else if (comment.replies.length > 0) {\n        replies = <CommentList comments={comment.replies} author={author}/>;\n    }\n\n    let body_html = parseLinks(comment.body_html);\n\n    //get relative time string\n    let dateString = comment.created_utc !== undefined ? formatDistanceStrict(new Date(), comment.created_utc*1000) : '';\n\n    let pointString = comment.score === 1 || comment.score === -1 ? 'point' : 'points';\n\n    const toggleClosed = () => {\n        setClosed(!closed);\n    }        \n\n    const getMore = () => {\n        getMoreComments(comment.id, comment.permalink);\n    }\n\n    //dont' currently support getting more top level comments, so don't show anything\n    if (comment.kind === 'more' && comment.permalink.length === 0) return null;\n\n    return (\n        <StyledComment single={single}>\n            { single ? <CommentLinkTitle onClick={onClickLink(`/${comment.subreddit}/comments/${comment.link_id.replace('t3_','')}`)}>{comment.link_title}<span style={{color: 'gray'}}> | {comment.subreddit}</span> </CommentLinkTitle> : null }\n            { single ? null : <CommentClose onClick={toggleClosed}>{ closed ? '[ + ] ' : '[ - ] ' }</CommentClose> }\n            { single ? null : <CommentAuthor original={comment.author === author} href={`#/user/${comment.author}`}>{comment.author}</CommentAuthor> }\n            { comment.kind === 'more' ? null : <span style={{color: 'gray'}}> {single ? '' : '|'} {comment.score} {pointString}{dateString.length > 0 ? ` | ${dateString}` : ''}</span> }\n            { closed ? null : <div dangerouslySetInnerHTML={{ __html: body_html }} style={permalinkComment ? {backgroundColor: 'rgba(150,150,0,0.3)'} : {}}></div> }\n            { closed ? null : (\n                <CommentFooter>\n                    { comment.kind !== 'more' ? <a href={`https://www.reddit.com/${comment.permalink}`} target=\"_blank\" rel=\"noreferrer noopener\">Permalink</a> : null }\n                    { single ? <span onClick={onClickLink(comment.permalink.replace('r/',''))}> | Go to comment</span> : null }\n                    { comment.kind === 'more' ? <div onClick={getMore}>Load More</div> : null }\n                </CommentFooter>) }\n            { closed ? null : replies }\n        </StyledComment>\n    );\n}\n\nexport default Comment;","import styled from 'styled-components';\n\nconst LoadingSpinner = styled.div`\n    width: 50px;\n    height: 50px;\n    border-radius: 50%;\n    border: 3px solid red;\n    border-top: 0px;\n    border-bottom: 0px;\n    margin: auto;\n    margin-top:40px;\n    position: relative;\n    animation-name: rotate;\n    animation-duration: 1s;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n\n    &:after {\n        content:'';\n        display: block;\n        position: absolute;\n        top: 2px;\n        left: 2px;\n        width: 40px;\n        height: 40px;\n        border-radius: 50%;\n        border: 3px solid red;\n        border-left: 0px;\n        border-right: 0px;\n        margin: auto;\n        animation-name: rotate;\n        animation-duration: 0.5s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n        animation-direction: reverse;\n    }\n\n    &:before {\n        content:'';\n        display: block;\n        position: absolute;\n        top: 10px;\n        left: 4px;\n        width: 30px;\n        height: 30px;\n        border-radius: 50%;\n        border: 3px solid red;\n        border-top: 0px;\n        border-bottom: 0px;\n        margin: auto;\n        animation-name: rotate;\n        animation-duration: 1s;\n        animation-iteration-count: infinite;\n        animation-timing-function: linear;\n    }\n\n    @keyframes rotate {\n        from {\n            transform: rotate(0deg);\n        }\n        \n        to {\n            transform: rotate(360deg);\n        }\n    }\n`;\n\nexport default LoadingSpinner;","import React from 'react';\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport { useSelector } from 'react-redux';\n\nimport { getPostList } from '../functions/useful';\n\nimport PostLink from './PostLink';\nimport SubLink from './SubLink';\nimport Comment from './Comment';\nimport LoadingSpinner from './Styled/LoadingSpinner';\n\nconst PostList = ({onClickLink}) => {\n    const posts = useSelector(state => state.posts);\n    const noPosts = useSelector(state => state.noPosts);\n    const currentSub = useSelector(state => state.currentSub);\n    const currentSort = useSelector(state => state.currentSort);\n    const currentPostId = useSelector(state => state.currentPostId);\n    const noMorePosts = useSelector(state => state.noMorePosts);\n    const loadMorePosts = () => getPostList(true);\n\n    if (noPosts) return <div style={{textAlign:'center'}}>No Posts Found</div>\n    if (posts.length === 0 && currentPostId.length === 0) return <div><LoadingSpinner/></div>;\n\n    let hide = currentPostId.length > 0;\n    let position = hide ? 'absolute' : 'relative';\n    let top = hide ? '-1000000px' : '0px';\n    let right = hide ? '-20000px' : '0px';\n    let hasMore = hide || noMorePosts ? false : true;    \n\n    return (\n        <div style={{margin: 'auto', position: position, top: top, right: right, marginBottom: '20px'}}>\n            <InfiniteScroll\n                dataLength={posts.length} //This is important field to render the next data\n                next={loadMorePosts}\n                hasMore={hasMore} //change to false when don't want to load more or nothing left\n                loader={<div style={{textAlign: 'center', margin: '10px'}}>Loading More...</div>}\n                scrollableTarget={'#mainPage'}\n                scrollThreshold={'500px'}\n            >\n            {\n                posts.map(post => {\n                    if (post.type === 'comment') return <Comment key={post.id} comment={post} author='' single={true} onClickLink={onClickLink}/>;\n                    if (post.type === 'sub') return <SubLink key={post.id} sub={post} currentSort={currentSort}/>;\n                    if (currentSub === 'user') return <PostLink key={post.id} post={post} currentSub={post.subreddit} currentSort={'hot'} onClickLink={onClickLink}/>;\n                    return <PostLink key={post.id} post={post} currentSub={currentSub} currentSort={currentSort} onClickLink={onClickLink}/>;\n                })\n            }\n            {\n                noMorePosts ? <div style={{textAlign: 'center', margin: '10px'}}>No More Posts</div> : null\n            }\n            </InfiniteScroll>\n        </div>\n    );\n}\n\nexport default PostList;","import React, { useState } from 'react';\nimport { useMediaQuery } from 'react-responsive';\nimport styled from 'styled-components';\nimport { FaChevronDown } from 'react-icons/fa'\n\nimport { parseBodyText } from '../functions/useful';\n\nimport LoadingSpinner from './Styled/LoadingSpinner';\n\nconst StyledComp = styled.div`\n    & > div#mainImageOuter {\n        position: relative;\n    }\n\n    & > div#caption {\n        text-align: center;\n        font-size: 0.9em;\n        margin-bottom: 5px;\n    }\n\n    & > div#thumbnails {\n        display: flex;\n        max-width: 100%;\n        justify-content: center;\n        align-items: center;\n        flex-flow: wrap;\n    }\n\n    & > div#thumbnails > img {\n        margin: 5px;\n    }\n\n    & > div#thumbnails > img:hover {\n        cursor: pointer;\n    }\n\n    & > div#thumbnails > img.selected {\n        border: 1px solid red;\n    }\n\n    & #galleryInner {\n        padding-top: 50%;\n    }\n    \n    & #galleryImgDiv {\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        width: 100%;\n        height: 100%;\n        text-align: center;\n        display: flex;\n        justify-content: center;\n    }\n\n    & #galleryImgDiv a {\n        align-self: center;\n        width: calc(100% - 100px);\n        height: 100%;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    }\n    \n    & #galleryImgDiv img {\n        max-width: 100%;\n        max-height: 100%;\n    }\n\n    & #galleryBack, & #galleryForward {\n        position: absolute;\n        top: 50%;\n        z-index: 3;\n        border-radius: 50%;\n        width: 50px;\n        height: 50px;\n        background-color: black;\n        opacity: 0.6;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        font-size: 2em;\n    }\n\n    & #galleryBack:hover, & #galleryForward:hover {\n        cursor: pointer;\n        background-color: gray;\n    }\n\n    & #galleryBack {\n        transform: translate(0,-50%) rotate(90deg);\n        left: -15px;\n    }\n\n    & #galleryForward {\n        transform: translate(0,-50%) rotate(-90deg);\n        right: -15px;\n    }\n\n    & #galleryBack > svg, & #galleryForward > svg {\n        position: relative;\n        top: 2px;\n    }\n\n    @media screen and (max-width: 700px) {\n        & #galleryBack:hover, & #galleryForward:hover {\n            background-color: black;\n        }\n    }\n`;\n\n//function to get the url based on an index, but if that index doesn't exist, it gets the next largest image.\nconst getURL = (arr, index) => {\n    let limit = 6;\n    while (true && limit > 0) {\n        if (arr[index] !== undefined) return parseBodyText(arr[index].u);\n        else index--;\n        limit--;\n    }\n}\n\nconst Gallery = ({data, extraData}) => {\n    let firstId = data ? Object.keys(data)[0] : '';\n    const [id, setId] = useState(firstId);\n    const isMobile = useMediaQuery({ maxWidth: 700 });\n    const level4 = useMediaQuery({ maxWidth: 960 });\n    const level5 = useMediaQuery({ maxWidth: 2560 });\n    let index = data ? Object.keys(data).indexOf(id) : 0;\n    let numberOfImages = data ? Object.keys(data).length : 0;\n    const [showSpinner, setShowSpinner] = useState(true);\n\n    if (!data) return <p>Post has been removed</p>;\n\n    let url = '';\n    if (level5) url = getURL(data[id].p, 5);\n    if (level4) url = getURL(data[id].p, 4);\n    if (isMobile) url = getURL(data[id].p, 3);\n    let fullUrl = parseBodyText(data[id].s.u);\n\n    let caption = `${index+1}/${numberOfImages}`;\n    let extraDataObj = extraData.items.find(obj => obj.media_id === id);\n    if (extraDataObj !== undefined) {\n        if (extraDataObj.caption !== undefined) caption += ' - Caption: ' + extraDataObj.caption;\n    }\n\n    const onClickThumb = (id) => () => {\n        setId(id);\n        setShowSpinner(true);\n    }\n\n    const next = () => {\n        let arr = Object.keys(data);\n        let index = arr.indexOf(id);\n        let next = index+1;\n        if (next >= arr.length) next = 0;\n        let nextId = arr[next];\n        setId(nextId);\n        setShowSpinner(true);\n    }\n\n    const previous = () => {\n        let arr = Object.keys(data);\n        let index = arr.indexOf(id);\n        let next = index-1;\n        if (next < 0) next = arr.length-1;\n        let nextId = arr[next];\n        setId(nextId);\n        setShowSpinner(true);\n    }\n\n    const onImageLoad = () => {\n        setShowSpinner(false);\n    }\n\n    return (\n        <StyledComp>\n            { caption.length > 0 ? <div id=\"caption\">{ caption }</div> : null }\n            <div id=\"mainImageOuter\">\n                <div id=\"galleryInner\">\n                    <div onClick={previous} id=\"galleryBack\"><FaChevronDown/></div>\n                    <div onClick={next} id=\"galleryForward\"><FaChevronDown/></div>\n                    { showSpinner ? <LoadingSpinner style={{position: 'absolute', left: 'calc(50% - 25px)', top: 'calc(50% - 50px)', zIndex: '0'}}/> : null }\n                    <div id=\"galleryImgDiv\">\n                        <a key={id} href={fullUrl} target=\"_blank\" rel=\"noopener noreferrer\"><img src={url} alt=\"Gallery Main\" onLoad={onImageLoad}/></a>\n                    </div>\n                </div>\n            </div>\n            <div id=\"thumbnails\">\n            {\n                isMobile ? null : Object.values(data).map((obj, i) => {\n                    return <img key={obj.id+i} src={parseBodyText(obj.p[0].u)} onClick={onClickThumb(obj.id)} alt=\"Thumbnail\" className={id === obj.id ? 'selected' : ''}/>\n                })\n            }\n            </div>\n        </StyledComp>\n    );\n}\n\nexport default Gallery;","import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { formatDistanceStrict } from 'date-fns';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useMediaQuery } from 'react-responsive';\nimport { FaChevronDown } from 'react-icons/fa'\n\nimport CommentList from './CommentList';\nimport Gallery from './Gallery';\nimport LoadingSpinner from './Styled/LoadingSpinner';\n\nimport { parseBodyText, parseLinks, updatePostDetails, getComments } from '../functions/useful';\n\nconst StyledPost = styled.div`\n    background-color: black;\n    padding: 20px;\n    width: 100%;\n    max-width: 1200px;\n    margin: auto;\n    margin-bottom: 30px;\n\n    & h1 {\n        text-align: left;\n        margin-bottom: 10px;\n    }\n`;\n\nconst PostDetails = styled.div`\n    color: gray;\n    text-align: left;\n    margin-bottom: 5px;\n\n    & a {\n        color: gray;\n    }\n`;\n\nconst PostBody = styled.div`\n    border-bottom: 1px solid gray;\n    margin-bottom: 5px;\n    padding-bottom: 10px;\n\n    & pre {\n        overflow: scroll;\n    }\n\n    & > img {\n        max-width: 100%;\n        margin-top: 10px;\n    }\n    \n    & iframe {\n        max-width: 100%;\n        margin: auto;\n        display: block;\n    }\n\n    & a {\n     color: rgb(0, 225, 255);\n    }\n\n    & h1 {\n        font-size: 1.2em;\n    }\n\n    & h2 {\n        font-size: 1.1em;\n    }\n\n    & h3 {\n        font-size: 1em;\n    }\n\n    & .embedly-card-hug {\n        background-color: white;\n        margin: 5px !important;\n    }\n`;\n\nconst ScrollButton = styled.div`\n    position: fixed;\n    bottom: 10px;\n    right: 10px;\n    width: 50px;\n    height: 50px;\n    border: 1px solid red;\n    background-color: black;\n    border-radius: 50%;\n    text-align: center;\n\n    & > svg {\n        position: relative;\n        top: 10px;\n        font-size: 2em;\n    }\n\n    :hover {\n        cursor: pointer;\n        background-color: gray;\n    }\n\n    @media screen and (max-width: 700px) {\n        :hover {\n            background-color: black;\n        }\n    }\n`;\n\nconst SimpleButton = styled.span`\n    :hover {\n        cursor: pointer;\n    }\n`\n\nconst Post = () => {\n    const dispatch = useDispatch();\n\n    const comments = useSelector(state => state.comments);\n    const noComments = useSelector(state => state.noComments);\n    let post = useSelector(state => state.postDetails);\n    const currentPostId = useSelector(state => state.currentPostId);\n    const commentSort = useSelector(state => state.commentSort);\n    const currentSub = useSelector(state => state.currentSub);\n    const permalinkUrl = useSelector(state => state.permalinkUrl);\n    const showContext = useSelector(state => state.showContext);\n    const isMobile = useMediaQuery({ maxWidth: 700 });\n\n    const saved = useSelector(state => state.saved);\n    const setSaved = (val) => dispatch({type: 'SET_SAVED', payload: val});\n\n    useEffect(() => {\n        //get quick details from posts array\n        updatePostDetails();\n        window.scrollTo(0,0); \n    }, []);\n\n    useEffect(() => {\n        //if comment sort method or post Id is changed, then get comments again using new values        \n        getComments();\n    }, [commentSort, currentPostId, permalinkUrl, showContext]);\n\n    if (post.body === undefined || post.id !== currentPostId) {\n        return <div style={{textAlign: 'center'}}><LoadingSpinner/></div>;\n    }\n\n    let {url, title, author, created, body, media, permalink, media_embed, media_metadata, is_gallery, gallery_data} = post;    \n\n    //check if post is a link to another post and make sure it goes there locally and not on a new page\n    let urlMatches = url.match(/\\/r\\/[a-zA-Z0-9]+\\/comments\\/[a-zA-Z0-9]+/g);\n    let localUrl = undefined;\n    if (urlMatches && urlMatches.length > 0) {\n        let match = urlMatches[0];\n        let sub = match.match(/r\\/([a-zA-Z0-9]+)/)[1];\n        let id = match.match(/comments\\/([a-zA-Z0-9]+)/)[1];\n        let alreadyHere = sub === currentSub && id === currentPostId;\n        if (sub !== undefined && id !== undefined && !alreadyHere) localUrl = `#/${sub}/comments/${id}`;\n    }\n    \n\n    //get parsed body tag\n    let bodyTag = parsePostBody(body, url, media, media_embed, permalink, title, currentSub, media_metadata, is_gallery, gallery_data);  \n\n    //get relative time string\n    let dateString = formatDistanceStrict(new Date(), created*1000);\n\n    //if URL is too long, make shorter\n    let shortUrl = url || '';\n    if (shortUrl.length > 40) shortUrl = shortUrl.substr(0,40) + '...';\n\n    //check if post is saved\n    let isSaved = saved.find(obj => obj.id === currentPostId) !== undefined;\n\n    //find the next comment that's not at the top and scroll to it\n    const scrollToNext = () => {\n        const commentDiv = document.querySelector('#commentList');\n        for (let i = 0; i < commentDiv.children.length; i++) {\n            let child = commentDiv.children[i];\n            let rect = child.getBoundingClientRect();            \n            if (rect.top < 1 || (isMobile && rect.top < 41)) continue;\n            else {\n                child.scrollIntoView();\n                //adjust for the top menu on mobile devices\n                if (isMobile) {\n                    const el = document.scrollingElement || document.documentElement;\n                    el.scrollTop -= 40;\n                }\n                break;\n            }\n        }\n    }\n\n    const onSavePost = () => {\n        let newSaved;\n        if (isSaved) {\n            newSaved = saved.filter(obj => obj.id !== post.id);\n        } else {\n            let link = `/${currentSub}/comments/${post.id}`;\n            newSaved = [...saved, {id: currentPostId, title: title, url: link, sub: currentSub}];\n        }\n\n        setSaved(newSaved);\n        localStorage.setItem('saved', JSON.stringify(newSaved));\n    }\n\n    let urlTag = <a href={url} target=\"_blank\" rel=\"noopener noreferrer\"> | Go to URL ({shortUrl})</a>;\n    if (localUrl !== undefined) urlTag = <a href={localUrl}> | Go to Post ({shortUrl})</a>;\n    if (url.includes('v.redd.it')) urlTag = <a href={`https://www.reddit.com${permalink}`} target=\"_blank\" rel=\"noopener noreferrer\"> | Video</a>;\n\n    let hasContext = comments[0] !== undefined ? comments[0].hasContext : false;\n\n    return (\n        <StyledPost>\n            <div>\n                <h2 dangerouslySetInnerHTML={{ __html: title}}></h2>\n                <PostDetails><a href={`#/user/${author}`}>{author}</a> | {dateString} { urlTag }</PostDetails>\n                <PostDetails><a href={`https://www.reddit.com${permalink}`} target=\"_blank\" rel=\"noopener noreferrer\">Open on Reddit</a> - <SimpleButton onClick={onSavePost}>{ isSaved ? 'Unsave' : 'Save' }</SimpleButton></PostDetails>\n                { bodyTag }\n            </div>\n            { comments.length === 0 && noComments === false ? <LoadingSpinner/> : null }\n            { noComments ? <div>No Comments</div> : null }\n            { permalinkUrl.length > 0 ? <a href={`#/${currentSub}/comments/${currentPostId}`}>Show All Comments</a> : null }\n            { permalinkUrl.length > 0 && hasContext ? <span> - <a href={`#/${currentSub}/comments/${currentPostId}/${permalinkUrl}/?context=10000`}>Show Context</a></span> : null }\n            <CommentList comments={comments} author={author}/>\n            <ScrollButton onClick={scrollToNext}><FaChevronDown/></ScrollButton>\n        </StyledPost>\n    );\n}\n\nconst parsePostBody = (body, url, media, media_embed, permalink, title, currentSub, media_metadata, is_gallery, gallery_data) => {\n    body = parseLinks(body);\n    \n    //check for image link to url and replace body with image if so\n    let bodyTag = <PostBody dangerouslySetInnerHTML={{ __html: body }} className=\"postDivBody\"></PostBody>;\n    if (/.(png|jpg|jpeg|bmp|gif)$/.test(url)){\n        bodyTag = <PostBody><img src={url} alt=\"Preview of content\"/></PostBody>;\n    }\n\n    //check for a live update thread\n    if (media && media.type === 'liveupdate') {        \n        let content = parseBodyText(media_embed.content);\n        content = content.replace('iframe src', 'iframe width=\"100%\" src');\n        bodyTag = <PostBody dangerouslySetInnerHTML={{ __html: content }} className=\"postDivBody\"></PostBody>;\n        return bodyTag;\n    }\n\n    //check for media embed and replace body with this\n    if (media && media.oembed){\n        media = parseBodyText(media.oembed.html);\n        media = parseLinks(media);\n        if (body.length > 0) media += '<br/>'+body;\n        bodyTag = <PostBody dangerouslySetInnerHTML={{ __html: media }} className=\"postDivBody\"></PostBody>;\n    } else {\n        media = '';\n    }\n\n    if (is_gallery) {\n        return <PostBody className=\"postDivBody\"><Gallery data={media_metadata} extraData={gallery_data}/></PostBody>\n    }\n\n    if (url.includes('v.redd.it')) {\n        let url = `https://www.reddit.com${permalink}?ref=share&ref_source=embed`;\n        bodyTag = <PostBody className=\"postDivBody\">\n                    <blockquote className=\"reddit-card\">\n                        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{title}</a>\n                    </blockquote>\n                  </PostBody>\n    }\n    \n    return bodyTag;\n}\n\nexport default Post;","import React from 'react';\nimport styled from 'styled-components';\n\nconst ReloadButton = styled.span`\n    color: gray;\n\n    :hover {\n        cursor: pointer;\n        color: white;\n    }\n`;\n\nconst Header = ({heading, onReload}) => {\n    return (\n        <h1 style={{textAlign: 'center'}}>{heading} &nbsp;<ReloadButton onClick={onReload}>&#8635;</ReloadButton></h1>\n    );\n};\n\nexport default Header;","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport styled from 'styled-components';\n\nimport SortMenu from './SortMenu';\nimport CommentSortMenu from './CommentSortMenu';\nimport UserSortMenu from './UserSortMenu';\nimport SubList from './SubList';\nimport SearchMenu from './SearchMenu';\nimport SaveList from './SaveList';\nimport Button from './Styled/Button';\n\nconst StyledSideMenu = styled.div`\n    width: 250px;\n    border-right: 1px solid red;\n    height: 100%;\n    position: fixed;\n    overflow: scroll;\n`;\n\nconst SavedButton = styled(Button)`\n    border-top: none;\n    border-bottom: 1px solid gray;\n`;\n\nconst SideMenu = () => {\n    const [showSaved, setShowSaved] = useState(false);\n    const currentPostId = useSelector(state => state.currentPostId);\n    const currentSub = useSelector(state => state.currentSub);\n\n    const onClickHideSaved = () => {\n        setShowSaved(false);\n    }\n\n    const onClickShowSaved = () => {\n        setShowSaved(true);\n    }\n\n    if (showSaved) {\n        return (\n            <StyledSideMenu>\n                <SavedButton onClick={onClickHideSaved}>Back</SavedButton>\n                <SaveList/>\n            </StyledSideMenu>\n        );\n    } else {\n        return (\n            <StyledSideMenu>\n                <SavedButton onClick={onClickShowSaved}>Saved Posts</SavedButton>\n                <SearchMenu/>\n                { currentSub === 'user' ? <UserSortMenu/> : currentPostId.length > 0 ? <CommentSortMenu/> : <SortMenu/> }\n                <SubList/>\n            </StyledSideMenu>\n        );\n    }\n}\n\nexport default SideMenu;","import React, { useEffect, useState, useCallback } from \"react\";\nimport { useMediaQuery } from 'react-responsive';\nimport { useSelector, useDispatch, batch } from 'react-redux';\n\nimport TopMenu from './components/TopMenu';\nimport PostList from './components/PostList';\nimport Post from './components/Post';\nimport Header from './components/Header';\nimport SideMenu from './components/SideMenu';\n\nimport { getPostList, getComments, parseURL, parseSearch } from './functions/useful';\n\nconst Page = ({location, history}) => {\n    const dispatch = useDispatch();\n    const [scrollPos, setScrollPos] = useState(0);\n    const posts = useSelector(state => state.posts);\n\n    const currentSort = useSelector(state => state.currentSort);\n    const setCurrentSort = (sort) => dispatch({type: 'SET_SORT', payload: sort});\n    \n    const closeMenus = () => dispatch({type: 'CLOSE_MENUS'});\n\n    const currentSub = useSelector(state => state.currentSub);\n    const setCurrentSub = (val) => dispatch({type: 'SET_SUB', payload: val});\n\n    const currentPostId = useSelector(state => state.currentPostId);\n    const setCurrentPostId = (val) => dispatch({type: 'SET_POSTID', payload: val});\n\n    const currentUserSort = useSelector(state => state.currentUserSort);\n    const setCurrentUserSort = (val) => dispatch({type: 'SET_USER_SORT', payload: val});\n\n    const currentSearch = useSelector(state => state.currentSearch);    \n    const setCurrentSearch = (val) => dispatch({type: 'SET_CURRENT_SEARCH', payload: val});\n\n    const currentSearchSort = useSelector(state => state.currentSearchSort);\n    const setCurrentSearchSort = (val) => dispatch({type: 'SET_CURRENT_SEARCH_SORT', payload: val});\n\n    const currentSearchSub = useSelector(state => state.currentSearchSub);\n    const setCurrentSearchSub = (val) => dispatch({type: 'SET_CURRENT_SEARCH_SUB', payload: val});\n\n    const currentSearchForSubs = useSelector(state => state.searchForSubs);\n    const setSearchForSubs = (val) => dispatch({type: 'SET_SEARCH_FOR_SUBS', payload: val});\n\n    const currentPermalinkUrl = useSelector(state => state.permalinkUrl);\n    const setPermalinkUrl = (val) => dispatch({type: 'SET_PERMALINK_URL', payload: val});\n\n    const currentContext = useSelector(state => state.showContext);\n    const setContext = (val) => dispatch({type: 'SET_SHOW_CONTEXT', payload: val});\n\n    const currentUser = useSelector(state => state.currentUser);\n    const setCurrentUser = (val) => dispatch({type: 'SET_USER', payload: val});\n\n    const isMobile = useMediaQuery({ maxWidth: 700 });\n\n    let {sub, newSort, postId, userSort, permalinkUrl, user} = parseURL(location.pathname);     \n    let {search, searchSort, searchSub, searchForSubs} = parseSearch(location.search);    \n\n    let showContext = location.search === '?context=10000';\n\n    //load saved posts from local storage\n    const setSaved = (val) => dispatch({type: 'SET_SAVED', payload: val});\n    useEffect(() => {\n        let storedSaves = localStorage.getItem('saved');\n        storedSaves = storedSaves ? JSON.parse(storedSaves) : [];\n        setSaved(storedSaves);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);    \n\n    batch(() => {\n        if (sub !== currentSub) setCurrentSub(sub);\n        if (postId !== currentPostId) setCurrentPostId(postId);\n        if (userSort !== currentUserSort) setCurrentUserSort(userSort);\n        if (newSort.length > 0 && newSort !== currentSort) setCurrentSort(newSort);\n        if (permalinkUrl !== currentPermalinkUrl) setPermalinkUrl(permalinkUrl);\n        if (showContext !== currentContext) setContext(showContext);\n        if (user.length > 0 && user !== currentUser) setCurrentUser(user);\n        \n        //if moving from user list to post to post list, then need to make sure user is reset otherwise still displays user list\n        if (user.length === 0 && newSort.length > 0 && postId.length === 0) setCurrentUser('');\n\n        if (postId.length > 0 || currentPostId.length > 0) return;\n        if (search !== currentSearch) setCurrentSearch(search);\n        if (searchSort !== currentSearchSort) setCurrentSearchSort(searchSort);\n        if (searchSub !== currentSearchSub) setCurrentSearchSub(searchSub);\n        if (searchForSubs !== currentSearchForSubs) setSearchForSubs(searchForSubs);\n    });\n\n    //when changing sub or sort method, get post list and clear search\n    useEffect(() => {   \n        if (isMobile) closeMenus(); \n        if (currentSub.length === 0) return;        \n        if (currentPostId.length > 0 && posts.length > 0) return;  \n        // if (currentSub === 'user' && posts.length > 0) return;        \n        getPostList();\n        \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentSort, currentSub, currentUser, currentUserSort, currentSearch, currentSearchSort, currentSearchSub, currentSearchForSubs]);\n\n    //return to scroll positiong before going to a post\n    useEffect(() => {\n        if (currentPostId.length === 0) {\n            window.scrollTo(0,scrollPos);\n        }\n        closeMenus();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentPostId]);\n\n    const onClickLink = useCallback((url) => (e) => {\n        let scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n        setScrollPos(oldVal => scrollTop);\n        history.push(url);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [])\n\n    if (sub !== currentSub || postId !== currentPostId || userSort !== currentUserSort || (newSort.length > 0 && newSort !== currentSort)) return <div></div>;\n\n    if (currentSub.length === 0) {\n        let redirectSub = '';\n        let storedSubs = localStorage.getItem('subs');\n        storedSubs = storedSubs ? JSON.parse(storedSubs) : [];\n        if (storedSubs.length > 0) redirectSub = storedSubs[0];\n        else redirectSub = 'Popular';\n        history.push(`/${redirectSub}/${currentSort}`);\n        return <div></div>;\n    }\n\n    const onReload = () => {\n        if (currentPostId.length > 0) getComments();\n        else getPostList(false, true);\n    }\n\n    const onBackClick = () => {\n        history.goBack();\n    }\n\n    const getMainPage = () => {\n        let heading = currentSub;\n        if (currentSearchForSubs) heading = `Searching: ${currentSearch}`;\n        if (currentSub === 'user') heading = `${currentUser}`;\n        \n        return (\n            <React.Fragment>\n                <Header heading={heading} onReload={onReload}/>\n                { currentPostId.length > 0 ? <Post/> : null }\n                <PostList onClickLink={onClickLink}/>\n            </React.Fragment>\n        );\n    }\n\n    if (isMobile) {\n        return (\n            <div style={{height: '100%', overflow: 'hidden'}}>\n                <TopMenu onBackClick={onBackClick}/>\n                <div style={{marginTop: '50px'}}></div>\n                { getMainPage() }\n            </div>\n        );\n    } else {\n        return (\n            <div style={{display: 'flex', height: '100%'}}>\n                <div>\n                    <SideMenu/>\n                </div>\n                <div style={{width: 'calc(100% - 250px)', height: '100%', overflow: 'scroll', marginLeft: '250px', position: 'relative'}} id='mainPage'>\n                    { getMainPage() }\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Page;","import React from \"react\";\nimport { HashRouter as Router, Route } from \"react-router-dom\";\n\nimport Page from './MainPage';\n\nconst App = () => {\n    return (\n        <Router>\n            <Route path=\"/\" component={Page}/>\n        </Router>\n    );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n\nReactDOM.render(\n    <Provider store={store}>\n         <App />\n    </Provider>\n        , document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}